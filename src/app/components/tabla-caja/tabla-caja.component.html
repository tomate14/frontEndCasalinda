<div class="container-fluid">
    <button class="btn btn-success" (click)="toggleForm(true)">Ingreso</button>
    <button class="btn btn-danger" (click)="toggleForm(false)">Gasto</button>
    <div *ngIf="isFormVisible">
        <form [formGroup]="myForm" (ngSubmit)="onSubmit()" class="container needs-validation">
            <div class="form-group">
              <label for="descripcion">Descripcion</label>
              <input type="text" class="form-control" id="descripcion" formControlName="descripcion" aria-describedby="emailHelp" placeholder="descripcion" required>
              <div *ngIf="myForm.get('descripcion')?.invalid && myForm.get('descripcion')?.touched" 
              [ngClass]="{'d-block': myForm.get('descripcion')?.invalid && myForm.get('descripcion')?.touched, 'd-none': !(myForm.get('descripcion')?.invalid && myForm.get('descripcion')?.touched)}" 
              class="invalid-feedback">Debe ingresar una descripcion</div>
            </div>
            <br/>
            <div class="row form-group">
                <div class="col-3">
                    <label class="sr-only" for="inlineFormTotal">Total</label>
                    <div class="input-group mb-2">
                    <div class="input-group-prepend">
                        <div class="input-group-text">$</div>
                    </div>
                    <input type="number" class="form-control" formControlName="valor" id="inlineFormTotal" placeholder="Valor" required>
                    <div *ngIf="myForm.get('valor')?.invalid && myForm.get('valor')?.touched" 
                        [ngClass]="{'d-block': myForm.get('valor')?.invalid && myForm.get('valor')?.touched, 'd-none': !(myForm.get('valor')?.invalid && myForm.get('valor')?.touched)}" 
                        class="invalid-feedback">Debe ingresar el valor</div>
                    </div>
                </div>
                <div class="col-6">
                    <mat-form-field>
                        <!-- mat-label>Forma De Pago</mat-label-->
                        <mat-select formControlName="formaDePago">
                          @for (fPago of formaDePago; track fPago) {
                            <mat-option [value]="fPago.value">{{fPago.viewValue}}</mat-option>
                          }
                        </mat-select>
                    </mat-form-field>
                </div>                
              </div>
            <button *ngIf="esIngreso" type="submit" class="btn btn-success">Agregar</button>          
            <button *ngIf="!esIngreso" type="submit" class="btn btn-danger">Eliminar</button>
        </form>
    </div>
    <div class="row">
        <div class="col">
            <table class="table table-striped">
            <thead>
                <tr>
                <th>Descripcion</th>
                <th>Fecha</th>
                <th>Contado</th>
                <th>Tarjeta</th>
                <th>Cuenta DNI</th>
                <th>Borrar</th>
                <th>Editar</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let pago of pagos">
                    <td>{{ pago.descripcion }}</td>
                    <td>{{ pago.fechaPago | date: 'dd/MM/yyyy HH:mm' }}</td>
                    <td>
                        <span *ngIf="pago.formaPago === 1" [ngClass]="{'red-text': pago.valor < 0, 'green-text': pago.valor > 0}">
                            {{pago.valor | currency: 'CAD' : 'symbol-narrow' : '4.2-2'}}
                        </span>
                    </td>
                    <td>
                        <span *ngIf="pago.formaPago === 2" [ngClass]="{'red-text': pago.valor < 0, 'green-text': pago.valor > 0}">
                            {{pago.valor | currency: 'CAD' : 'symbol-narrow' : '4.2-2'}}
                        </span>
                    </td>
                    <td>
                        <span *ngIf="pago.formaPago === 3" [ngClass]="{'red-text': pago.valor < 0, 'green-text': pago.valor > 0}">
                            {{pago.valor | currency: 'CAD' : 'symbol-narrow' : '4.2-2'}}
                        </span>
                    </td>
                    <td><button class="btn btn-danger" (click)="eliminarPago(pago)"><i class="fa fa-trash" aria-hidden="true"></i></button></td>
                    <td><button class="btn btn-info" (click)="editarPago(pago)"><i class="fas fa-edit"></i></button></td>
                </tr>
            </tbody>
            </table>
        </div>
    </div>
  </div>